import{_ as e}from"./index-DErQs6qg.js";import{r as a,j as l,w as t,o as s,_ as r,$ as o,a0 as i,a6 as d,a7 as u,a3 as n}from"./vendor-D9nIYA3N.js";const c=["srcset","media"],p=["src","data-src","alt"],v={key:0,class:"loading-overlay"},g=e({__name:"OptimizedImage",props:{src:{type:String,required:!0},srcWebp:{type:String,default:""},alt:{type:String,default:""},webpSupport:{type:Boolean,default:!0},imgClass:{type:String,default:""},imgStyle:{type:Object,default:()=>({})},media:{type:String,default:""},threshold:{type:Number,default:.1},blurUp:{type:Boolean,default:!0},placeholderColor:{type:String,default:"#f0f0f0"},showLoader:{type:Boolean,default:!0}},setup(e){const g=e,m=a(null),y=a(!0),f=a(null),b=l((()=>g.blurUp?`data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1 1"%3E%3Crect width="1" height="1" fill="${encodeURIComponent(g.placeholderColor)}"%3E%3C/rect%3E%3C/svg%3E`:g.src)),h=()=>{y.value=!1},w=()=>{m.value&&(f.value=new IntersectionObserver((e=>{e[0].isIntersecting&&(m.value.dataset.src&&(m.value.src=m.value.dataset.src,m.value.removeAttribute("data-src")),f.value.disconnect())}),{root:null,threshold:g.threshold,rootMargin:"50px"}),f.value.observe(m.value))};return t((()=>g.src),(()=>{y.value=!0,m.value&&(m.value.dataset.src=g.src,f.value&&(f.value.disconnect(),w()))})),s((()=>{"IntersectionObserver"in window?w():m.value.src=g.src})),(a,l)=>(o(),r("div",{class:n(["optimized-img-container",{loading:y.value,loaded:!y.value}])},[i("picture",null,[e.srcWebp?(o(),r("source",{key:0,srcset:e.srcWebp,type:"image/webp",media:e.media},null,8,c)):d("",!0),i("img",{ref_key:"imgRef",ref:m,src:b.value,"data-src":e.src,alt:e.alt,class:n([e.imgClass,{"blur-up":e.blurUp}]),style:u(e.imgStyle),loading:"lazy",onLoad:h},null,46,p)]),y.value&&e.showLoader?(o(),r("div",v,l[0]||(l[0]=[i("div",{class:"loading-spinner"},null,-1)]))):d("",!0)],2))}},[["__scopeId","data-v-7b036685"]]);export{g as O};
